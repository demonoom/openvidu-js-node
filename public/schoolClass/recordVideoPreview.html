<!DOCTYPE html>
<html lang="en" style="height:100%">

<head>
    <meta charset="UTF-8">
    <title>回顾视频预览</title>
    <link rel="icon" href="img/logo_title.png" type="image/x-icon">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/hashmap.js"></script>
    <script type="text/javascript" src="js/layer/layer.js"></script>
    <script type="application/javascript" src="../openvidu-browser-2.8.0.js"></script>
    <script type="text/javascript" src="../ExRTCSDK-2.4.0.js"></script>
    <script type="text/javascript" src="js/service.js"></script>
    <script type="text/javascript" src="js/platform.js"></script>
</head>

<body style="background: #000;height: 100%;overflow: hidden;margin: 0" ondblclick="toggleFullScreen();" >
    <video ondurationchange="durationChange();" id="video_element"  style="max-width: 100%;max-height: 100%; position: absolute; left: 50%; top: 50%; z-index: 99;
    transform: translate(-50%,-50%);"   controls controlsList='nofullscreen nodownload noremote footbar' autoplay >
    </video>
</body>

<script type="text/javascript">

     $(document).ready(function(){
         hideActionBarMax();
         var video_element = document.getElementById("video_element");
         var filePath = Service.getQueryString("filePath");
         //filePath = "D:\\electronDownloads2\\1543936464767.mp4";
         video_element.src = filePath;
         video_element.currentTime = 9999999999;
     });

     function durationChange(){
         var video_element = document.getElementById("video_element");
         var duration = video_element.duration;
         if(duration != Infinity && duration > 0){
             video_element.currentTime = 0;
             video_element.play();
         }
     }

     function toggleFullScreen(){
         var remote = require('electron').remote;
         var electronWindow = remote.getCurrentWindow();
         var video_element = document.getElementsByTagName("body")[0];
         if (document.webkitFullscreenElement) {
             document.webkitExitFullscreen();
             electronWindow.webContents.executeJavaScript('showActionBar(true);');
         }else{
             video_element.webkitRequestFullscreen();
             electronWindow.webContents.executeJavaScript('showActionBar(false);');
         }
     }

     function hideActionBarMax(){
         var remote = require('electron').remote;
         var electronWindow = remote.getCurrentWindow();
         electronWindow.webContents.executeJavaScript('showActionBarMax(false);');
     }

</script>

</html>