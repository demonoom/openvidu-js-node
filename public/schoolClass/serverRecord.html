<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>服务端推流中</title>
    <link rel="icon" href="img/logo_title.png" type="image/x-icon">
    <link type="text/css" rel="stylesheet" href="css/record_list.css?v=35" />
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/hashmap.js"></script>
    <script type="text/javascript" src="js/layer/layer.js"></script>
    <script type="application/javascript" src="../openvidu-browser-2.8.0.js"></script>
    <script type="text/javascript" src="../ExRTCSDK-2.4.0.js"></script>
    <script type="text/javascript" src="js/service.js"></script>
    <script type="application/javascript" src="https://jsmpeg.com/jsmpeg.min.js"></script>
    <script type="text/javascript" src="js/platform.js"></script>
    <script type="text/javascript" src="js/socket.io.js"></script>
    <script type="text/javascript" src="js/MultiStreamsMixer.js"></script>
    <script type="text/javascript" src="js/ServerRecord.js"></script>

    <style>
        html,body{
            background: transparent;
        }
        .recording-btn{
            padding: 0;
            line-height: 1;
            margin: 0 auto;
            width: 92px;
            text-align: center;
            height: 22px;
            background: #e0e0e0;
            border-radius: 22px;
            margin-top: 4px;
        }
        .videoSource-red{
            width: 18px;
            height: 18px;
            display: inline-block;
        }
        .recordingTipText{
            background: transparent;
            color: #666;
            font-size: 12px;
            line-height: 22px;
            height: 22px;
            width: 70px;
            padding-left: 3px;
            box-sizing: border-box;
            display: inline-block;
            z-index: 11;
            position: relative;
            float: left;
            text-align: center;
        }
        .recordingTipTextStop{
            height: 22px;
            width: 22px;
            border-radius: 22px;
            display: inline-block;
            z-index: 11;
            position: relative;
            float: right;
            background: url("img/suspended-icon.png") no-repeat;
            background-size: 22px;
        }
        .recordingTipTextStop:hover{
            height: 22px;
            width: 22px;
            background: url("img/suspended-iconHover.png") no-repeat;
            background-size: 22px;
        }

    </style>
</head>

<body>
    <div class="recording-btn">
        <!--
        <i class="videoSource-red" id="recordingTipImg"><img src="images/play-red-icon.gif" width="100%" /></i>
        -->
        <span id="recordingTipText" class="recordingTipText" style="-webkit-app-region: drag;">推流中</span>
        <span class="recordingTipTextStop" onclick="stopCapture();" title="点击可停止录制" style="cursor:pointer"></span>
    </div>
</body>

<script type="text/javascript">
    function startServerRecord() {
        //var teacherId = Service.getQueryString("teacherId");
        var pushUrl = Service.getQueryString("pushUrl");
        var config = {};
        config.maxWidth = 1280;
        config.minWidth = 1280;
        config.maxHeight = 720;
        config.minHeight = 720;
        config.maxFrameRate = 30;
        config.minFrameRate = 30;
        config.pushUrl = pushUrl;
        config.webSocketUrl = "https://jiaoxue.maaee.com:9003/";
        config.timeSlice = 1500;
        config.recordingTipTextId = "recordingTipText",
        config.recordingTipImgId = "recordingTipImg"
        captureTab(config);
    }
    $(document).ready(function(){
        startServerRecord();
    });
</script>

</html>